# Copyright 2009 Ingmar Vanhassel
# Distributed under the terms of the GNU General Public License v2

SUMMARY="A hierarchical pool based memory allocator with destructors"
DESCRIPTION="
Talloc is a hierarchical pool based memory allocator with destructors. It is the core memory
allocator used in Samba, and has made a huge difference in many aspects of Samba4 development.
"
HOMEPAGE="http://talloc.samba.org/"
DOWNLOADS="http://samba.org/ftp/${PN}/${PNV}.tar.gz"

LICENCES="LGPL-3"
SLOT="0"
PLATFORMS="~amd64 ~x86"
MYOPTIONS=""

DEPENDENCIES="
    build:
        (
            app-text/docbook-xml-dtd:4.2
            dev-libs/libxslt
        ) [[ description = [ Need xsltproc to build the manual page ] ]]
"

DEFAULT_SRC_CONFIGURE_PARAMS=(
    '--bundled-libraries=NONE'
    '--hates=disable-silent-rules'
    '--hates=enable-fast-install'
)

DEFAULT_SRC_INSTALL_EXCLUDE=( release-script.sh )

# FIXME The install target in talloc.mk installs swig files (talloc.i) if swig is found

src_install() {
    default

    dosym /usr/${LIBDIR}/libtalloc.so.${PV} /usr/${LIBDIR}/libtalloc.so
}

